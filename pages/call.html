<!DOCTYPE html>
<html>

<head>
        <title>Messaging Test</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=320, user-scalable=no">
</head>
<h1>测试ReactNative和html之间通信</h1>

<body>
        <p>从React Native接收的消息: 0</p>
        <p>(没有消息)</p>
        <!-- <button type="button">
      给React Native发送消息
    </button> -->
    <span id='doc'></span>
        <div style="padding-top:50px;">
                <input id='A' />
                <input id='B' />
        </div>
        <Button id='cacl'>计算</Button> <span>AB相加为</span><span id='sum'></span>
        <script>

                //event 参数中有 data 属性，就是父窗口发送过来的数据
                window.addEventListener("message", function (e) {
                        // 把父窗口发送过来的数据显示在子窗口中
                        document.getElementById("doc").innerText = JSON.parse(e.data).result;
                }, false);


                var bt = document.getElementById('cacl');
                bt.addEventListener('click', function () {
                        var valA = document.getElementById('A').value;
                        var valB = document.getElementById('B').value;
                        window.postMessage("A")
                });
                document.addEventListener('message', function (e) {
                        document.getElementById('sum').innerText = JSON.parse(e.data).result;
                })
        </script>

        <!-- <script type="text/JavaScript">
        //event 参数中有 data 属性，就是父窗口发送过来的数据
        window.addEventListener("message", function( event ) { 
            // 把父窗口发送过来的数据显示在子窗口中
          document.getElementById("content").innerHTML+=event.data+"<br/>"; 
        }, false ); 
     
    </script> -->

</body>
<script>
//     var messagesReceivedFromReactNative = 0;
//     document.addEventListener('message', function(e) {
//       messagesReceivedFromReactNative += 1;
//       document.getElementsByTagName('p')[0].innerHTML =
//         '从React Native接收的消息: ' + messagesReceivedFromReactNative;
//       document.getElementsByTagName('p')[1].innerHTML = e.data;
//     });
//     document.getElementsByTagName('button')[0].addEventListener('click', function() {
//       window.postMessage('这是html发送到RN的消息');
//     });



</script>

</html>